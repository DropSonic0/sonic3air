STATIC = 1

# Include the base PS3 toolchain rules
include $(PSL1GHT)/ppu_rules

# Define the pkg-config to use
PKGCONFIG = pkg-config

# Add PS3-specific compiler flags
CFLAGS += -mcpu=cell -Wall -D__PS3__ -DPLATFORM_PS3

# Add linker flags
LDFLAGS = -Wl,-Map,$(notdir $@).map

# Add include and library paths for portlibs
INCLUDES += -I/usr/local/ps3dev/ppu/include
LIBPATHS += -L/usr/local/ps3dev/ppu/lib
INCLUDES += -I/usr/local/ps3dev/portlibs/ppu/include
LIBPATHS += -L/usr/local/ps3dev/portlibs/ppu/lib

# Add all the required libraries for the project, including rsxgl and its dependencies
LIBS += -lnet -lsysutil -lsysmodule -lGL -lEGL -lrsx -lgcm_sys -lio -lrt -llv2

# Define the output file extensions
SUFFIX = .elf
PKGSUFFIX = .elf

# Rule to create the final executable (no special packaging needed for this .elf)
$(OUTDIR)/$(NAME)$(PKGSUFFIX): $(OUTDIR)/$(NAME)$(SUFFIX)
	@cp $< $@